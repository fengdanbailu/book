# 页面布局
1. 嵌入kibana的页面，同时在url里设置参数；

# 主要功能
1. 提供kibana各种查询功能；
2. 为了方便，前端提供显示参数与kibana对应参数链接的对应关系；

# 涉及到的API
1. 此页面无API

# 值得总结的知识点
1. 涉及参数转化；
2. kibana语法查询；
3. 提供的kibana语法https://kibana_ufe.10101111.com/app/kibana#/discover?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:'{from}',mode:absolute,to:'{to}'))&_a=(columns:!({columns}),filters:!(),index:'ufenginx-*',interval:auto,query:(query_string:(analyze_wildcard:!t,query:'{query}')),sort:!('@timestamp',desc));
4. 其实自己总结更好，相对时间： https://kibana_ufe.10101111.com/app/kibana#/discover?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))&_a=(columns:!(requestInterface,response),index:'ufenginx-*',interval:auto,query:(query_string:(analyze_wildcard:!t,lowercase_expanded_terms:!f,query:'response:200')),sort:!('@timestamp',desc))
5. 绝对时间： https://kibana_ufe.10101111.com/app/kibana#/discover?_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:'2019-09-16T05:21:54.790Z',mode:absolute,to:'2019-09-16T05:36:54.790Z'))&_a=(columns:!(requestInterface,response),index:'ufenginx-*',interval:auto,query:(query_string:(analyze_wildcard:!t,lowercase_expanded_terms:!f,query:'response:200')),sort:!('@timestamp',desc))

# 存在的不足
1. 开始的参数种类没有设计好，目前比较凌乱；

# kibana语法
1. 程序调用参考[Lucene API](https://lucene.apache.org/core/6_4_0/core/overview-summary.html)
2. golang操作Elasticsearch[博客](https://blog.csdn.net/tflasd1157/article/details/81981915) | [elastic](https://github.com/olivere/elastic) | [go-elasticsearch](https://github.com/elastic/go-elasticsearch)
3. [查询语法](https://blog.csdn.net/cjfeii/article/details/79771399)|[英文教程](https://lucene.apache.org/core/2_9_4/queryparsersyntax.html)
4. 字段以key:value的形式；通配符?匹配单子字符，*匹配0个或多个字符；支持部分正则表达式，但性能较差；模糊搜索末尾缀上~n表示相似度；近似搜索尾缀上~n表示中间可以隔着5个单词；范围搜索[100 TO 200],["172.24.20.110" TO "172.24.20.140],date:{"now-6h" TO "now"} ,[1 TO 5}表示左闭右开，不设限用 *设置；可以化简为age:>10  age:<=10  age:(>=10 AND <20); 设置优先级quick^f fox,其中f可以是浮点数降低词频的优先级；需要转义符号有+ - = && || > < ! ( ) { } [ ] ^ " ~ * ? : \ /
5. [ES的官方demo](https://demo.elastic.co/app/kibana#/discover?_g=()&_a=(columns:!(_source),index:'filebeat-*',interval:auto,query:(language:kuery,query:''),sort:!('@timestamp',desc)))
